# 🏷️ ID3 标签读取功能说明

## ✨ 新功能概述

MyMusic 音乐播放器现在支持读取音乐文件的 **ID3 标签和元数据**，能够自动获取以下信息：

### 📋 支持的元数据信息

#### 🎵 基本信息
- **歌曲标题** (Title) - 歌曲名称
- **艺术家** (Artist) - 演唱者/乐队
- **专辑** (Album) - 专辑名称
- **专辑艺术家** (Album Artist) - 专辑制作者
- **年份** (Year) - 发行年份
- **流派** (Genre) - 音乐类型

#### 🔢 编号信息
- **音轨编号** (Track Number) - 在专辑中的序号
- **音轨总数** (Track Total) - 专辑总曲目数
- **碟片编号** (Disc Number) - 多碟专辑的碟片号
- **碟片总数** (Disc Total) - 多碟专辑的总碟数

#### 🎧 技术信息
- **时长** (Duration) - 歌曲长度（秒）
- **比特率** (Bitrate) - 音频质量 (kbps)
- **采样率** (Sample Rate) - 采样频率 (Hz)
- **编码器** (Codec) - 音频编码格式
- **容器格式** (Container) - 文件格式

#### 🎨 视觉信息
- **专辑封面** (Album Art) - 嵌入的图片
- **封面格式** (Art Format) - 图片类型 (JPEG/PNG/etc)

#### 📝 附加信息
- **歌词** (Lyrics) - 嵌入的歌词文本
- **评论** (Comment) - 附加备注
- **作曲家** (Composer) - 作曲者

## 🔧 支持的音频格式

### ✅ 完全支持的格式
- **MP3** (.mp3) - 支持 ID3v1/ID3v2 标签
- **FLAC** (.flac) - 支持 Vorbis Comments
- **M4A/AAC** (.m4a, .aac) - 支持 iTunes 标签
- **OGG** (.ogg) - 支持 Vorbis Comments

### 🔄 基础支持的格式
- **WAV** (.wav) - 支持 INFO 标签（有限）
- **WMA** (.wma) - 支持基本元数据

## 🚀 功能特色

### 📸 智能专辑封面处理
- **自动读取** 嵌入的专辑封面图片
- **格式转换** 自动转换为 base64 格式显示
- **错误处理** 图片加载失败时显示占位符
- **延迟加载** 优化性能，按需加载图片

### 🎯 智能信息优先级
1. **ID3 标签信息** (最高优先级)
2. **文件名解析** (备用方案)
3. **默认值** (最后选择)

### 📊 增强的库管理
- **专辑分组** 按艺术家和专辑智能分组
- **封面继承** 专辑封面从第一首有封面的歌曲继承
- **统计信息** 更准确的艺术家、专辑、流派统计

## 🎵 使用指南

### 导入音乐文件
1. 点击 **"导入文件"** 或 **"导入文件夹"**
2. 选择您的音乐文件
3. 应用会自动读取 ID3 标签信息
4. 在音乐库中查看详细的元数据

### 查看专辑封面
- **音乐列表** - 每首歌旁边显示小封面
- **播放器界面** - 当前播放歌曲的大封面
- **专辑视图** - 专辑网格中的封面图片

### 信息显示优先级
```
🏷️ ID3标签 > 📄 文件名解析 > ⚙️ 默认值
```

## 🛠️ 技术实现

### 依赖库
- **music-metadata** - 主要的元数据解析库
- **node-id3** - 专门的 ID3 标签处理库

### 处理流程
1. **文件选择** 用户选择音乐文件
2. **元数据读取** 后台解析 ID3 标签
3. **数据处理** 格式化和验证数据
4. **界面更新** 更新显示和数据库

### 性能优化
- **异步处理** 避免界面阻塞
- **错误容忍** 读取失败不影响导入
- **缓存机制** 避免重复解析
- **延迟加载** 优化大图片显示

## 🐛 故障排除

### 常见问题

#### ❓ 为什么有些文件没有显示封面？
- 文件可能没有嵌入专辑封面
- 图片格式可能不支持
- 文件损坏或标签错误

#### ❓ 为什么信息显示不正确？
- ID3 标签可能损坏或不完整
- 尝试使用音乐管理软件重新标记
- 检查文件编码是否正确

#### ❓ 为什么导入速度变慢？
- 读取元数据需要额外时间
- 大量文件时属正常现象
- 后台处理不会阻塞界面

### 解决方案

#### 🔧 优化标签信息
1. 使用专业音乐标签编辑器
   - **Mp3tag** (Windows/Mac)
   - **Kid3** (跨平台)
   - **MusicBrainz Picard** (自动标记)

2. 确保标签格式正确
   - 使用 UTF-8 编码
   - 避免特殊字符
   - 统一命名格式

#### 🖼️ 添加专辑封面
1. 下载高质量封面图片
2. 使用标签编辑器嵌入图片
3. 推荐尺寸：500x500 或更高
4. 格式：JPEG 或 PNG

## 📈 性能建议

### 🚀 最佳实践
- **整理音乐库** 使用统一的标签格式
- **优化图片** 封面图片不要过大 (< 1MB)
- **批量处理** 使用工具批量添加标签
- **定期维护** 清理无效文件和标签

### 📊 导入建议
- **小批量导入** 一次不要超过1000首
- **检查格式** 确保音频文件完整无损
- **网络存储** 避免从网络驱动器导入
- **磁盘空间** 确保有足够的存储空间

## 🔮 未来功能

### 计划中的增强
- **在线封面下载** 自动获取缺失的专辑封面
- **歌词同步** 支持更多歌词格式
- **元数据编辑** 在应用内直接编辑标签
- **批量操作** 批量修改和整理功能

---

享受您的增强版 MyMusic 播放器！现在您的音乐库将变得更加丰富和美观。🎵✨